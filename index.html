<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitness Tracker Sidebar</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="settings.css">
    <link rel="stylesheet" href="tables.css">
    <script src="settings.js"></script>
    <script src="tables.js"></script>
</head>
<body class="bg-light text-dark">
    <div class="content" id="content">
        <h2>Welcome, ${username}!</h2>
    </div>
    <div class="sidebar">
        <a href="#" class="text-center" onclick="showContent('tracking')">
            <i class="fas fa-home"></i>
            <div>Tracking</div>
        </a>
        <a href="#" class="text-center" onclick="showContent('profile')">
            <i class="fas fa-user-circle"></i>
            <div>Profile</div>
        </a>
    </div>
    <script>
        function showContent(option) {
            var contentDiv = document.getElementById("content");
            var text = "";
            // Check which option was clicked and display corresponding content
            switch (option) {
                case 'tracking':
                    text = `
                        <table class="table mb-8">
                            <tr>
                                <td class="pr-4">
                                    <h2 class="text-2xl font-bold mb-4">Exercise</h2>
                                    <form id="exerciseForm" method="post">
                                        <label for="exerciseName" class="block text-sm font-medium text-gray-600">Exercise</label>
                                        <input type="text" id="exerciseName" name="exerciseName" class="mt-1 p-2 w-full border rounded-md">
                                        <label for="reps" class="block text-sm font-medium text-gray-600">Reps</label>
                                        <input type="number" id="reps" name="reps" class="mt-1 p-2 w-full border rounded-md">
                                        <label for="time" class="block text-sm font-medium text-gray-600">Time</label>
                                        <input type="number" id="time" name="time" class="mt-1 p-2 w-full border rounded-md">
                                        <button type="submit" class="btn btn-primary mt-4" onclick="addExercise(event)">Add Exercise</button>
                                    </form>
                                </td>
                                <td class="pr-4">
                                    <h2 class="text-2xl font-bold mb-4">Meals</h2>
                                    <form id="mealsForm" method="post">
                                        <label for="mealsValue" class="block text-sm font-medium text-gray-600">Meals</label>
                                        <input type="text" id="mealsValue" name="mealsValue" class="mt-1 p-2 w-full border rounded-md">
                                        <label for="calories" class="block text-sm font-medium text-gray-600">Calories</label>
                                        <input type="number" id="calories" name="calories" class="mt-1 p-2 w-full border rounded-md">
                                        <label for="mealTime" class="block text-sm font-medium text-gray-600">Time</label>
                                        <input type="time" id="mealTime" name="mealTime" class="mt-1 p-2 w-full border rounded-md">
                                        <button type="submit" class="btn btn-primary mt-4" onclick="addMeal(event)">Add Meal</button>
                                    </form>
                                </td>
                                <td>
                                    <h2 class="text-2xl font-bold mb-4">Health</h2>
                                    <form id="healthForm" method="post">
                                        <label for="sleepDuration" class="block text-sm font-medium text-gray-600">Sleep Duration (hours)</label>
                                        <input type="number" id="sleepDuration" name="sleepDuration" class="mt-1 p-2 w-full border rounded-md" required>
                                        <label for="weight" class="block text-sm font-medium text-gray-600">Weight (kg)</label>
                                        <input type="number" id="weight" name="weight" class="mt-1 p-2 w-full border rounded-md" required>
                                        <label for="height" class="block text-sm font-medium text-gray-600">Height (cm)</label>
                                        <input type="number" id="height" name="height" class="mt-1 p-2 w-full border rounded-md" required>
                                        <button type="submit" class="btn btn-primary mt-4" onclick="addHealth(event)">Add Health</button>
                                    </form>
                                </td>
                            </tr>
                        </table>`;
                    break;
                case 'profile':
                    text = `
                         <div class="options-container">
                                <div class="option">
                                    <span>Change Password</span>
                                    <button onclick="changePassword()">Change Password</button>
                                </div>
                                <div class="option">
                                    <span>Contact Support</span>
                                    <button onclick="contactSupport()">Contact Support</button>
                                </div>
                                <div class="option">
                                    <span>Delete Account</span>
                                    <button onclick="deleteAccount()">Delete Account</button> 
                                </div>
                                <div class="option">
                                    <button onclick="logout()">Log Out</button>
                                </div>
                            </div>`;
                    break;
            }
            contentDiv.innerHTML = text;
        }
        function addHealth(event) {
        event.preventDefault(); // Prevent the default form submission
    
        // Get the form data
        const formData = new FormData(document.getElementById('healthForm'));
    
        // Validate if all fields are filled
        if (!formData.get('sleepDuration') || !formData.get('weight') || !formData.get('height')) {
            alert("Enter your metrics");
            return;
        }
    
        // Send the form data via fetch API
        fetch('SaveHealth.php', {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === "success") {
                // Create a new list item for the added health data
                const healthList = document.getElementById('healthList');
                const newItem = document.createElement('div');
                newItem.className = 'p-4 mb-4 border rounded-md';
                newItem.textContent = `Sleep Duration: ${formData.get('sleepDuration')} hours, Weight: ${formData.get('weight')} kg, Height: ${formData.get('height')} cm`;
                healthList.appendChild(newItem);
            }
            // Display an alert with the message
            alert(data.message);
        })
        .catch(error => {
            console.error('Error:', error);
            alert('An error occurred while saving the health data.');
        });
    }
 </script>
</body>
</html>
